<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åƒç´ å·¥å¡ç”Ÿæˆå™¨</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        @font-face {
            font-family: 'Friends Z';
            src: url('./FriendsZ-Regular.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        :root {
            --bg-color: #222;
            --card-bg: #fff;
            --ink-color: #000;
            --accent-gray: #ccc;
        }

        body {
            font-family: 'VT323', monospace; /* ä½¿ç”¨åƒç´ å­—ä½“ */
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h2 { text-align: center; margin-bottom: 10px; letter-spacing: 2px; }

        /* --- å·¥å¡ä¸»ä½“æ ·å¼ (é¢„è§ˆåŒº) --- */
        #card-capture-area {
            width: 324px;
            height: 540px;
            background-color: var(--card-bg);
            border: 4px solid var(--ink-color);
            border-radius: 0px;
            position: relative;
            color: var(--ink-color);
            overflow: hidden;
            /* æ¨¡æ‹Ÿç”µè·¯æ¿èƒŒæ™¯çº¹ç† */
            background-image: 
                linear-gradient(var(--ink-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--ink-color) 1px, transparent 1px);
            background-size: 20px 20px;
            background-color: #f0f0f0;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        /* è¦†ç›–ä¸€å±‚ç™½è‰²é®ç½©è®©èƒŒæ™¯åªåœ¨ç‰¹å®šåŒºåŸŸæ˜¾ç¤ºï¼Œæˆ–è€…æˆ‘ä»¬ç›´æ¥ç”¨å—çº§å…ƒç´ å †å  */
        .card-layer {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 1;
            /* å¤æ‚çš„CSSç”µè·¯èƒŒæ™¯æ¨¡æ‹Ÿæ¯”è¾ƒéš¾ï¼Œè¿™é‡Œç”¨ç®€å•çš„SVGå›¾æˆ–è€…CSSé®ç½©æ¨¡æ‹Ÿ */
            background: 
                radial-gradient(circle at 10% 20%, transparent 0%, transparent 0%),
                #fff;
            /* è¿™é‡Œä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬æŠŠèƒŒæ™¯è®¾ä¸ºç™½è‰²ï¼Œåªåœ¨è¾¹ç¼˜ç•™ä¸€ç‚¹ç¼éš™ */
            margin: 4px;
            border: 2px solid var(--ink-color);
        }
        
        /* çœŸæ­£çš„å¸ƒå±€å®¹å™¨ */
        .card-content {
            position: relative;
            z-index: 10;
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 15px;
            box-sizing: border-box;
            background: 
                radial-gradient(circle, transparent 20%, #fff 20%) 0 0/10px 10px; 
            /* ç®€å•çš„ç‚¹é˜µèƒŒæ™¯ */
        }

        /* å¤´éƒ¨: éƒ¨é—¨ä¿¡æ¯ */
        .header-box {
            background: var(--ink-color);
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            border: 2px solid var(--ink-color);
            margin-bottom: 10px;
        }
        .header-logo {
            width: 40px;
            height: 40px;
            filter: invert(1); /* åè‰²ï¼Œå› ä¸ºèƒŒæ™¯æ˜¯é»‘çš„ */
            margin-right: 10px;
            image-rendering: pixelated;
        }
        .header-text h3 { margin: 0; font-size: 22px; text-transform: uppercase; line-height: 1; }
        .header-text span { font-size: 14px; opacity: 0.8; }

        /* ä¸­éƒ¨: å¤´åƒå’Œä¿¡æ¯ */
        .main-section {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .photo-frame {
            width: 120px;
            height: 160px;
            border: 4px solid var(--ink-color);
            border-radius: 8px;
            padding: 4px;
            background: #fff;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.2);
        }
        .photo-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border: 0px solid var(--ink-color);
            border-radius: 4px;
            /*filter: grayscale(100%) contrast(120%);  å¼ºåˆ¶é»‘ç™½é«˜å¯¹æ¯” */
            image-rendering: pixelated;
        }

        .info-block {
            flex: 1;
            background: var(--ink-color);
            color: #fff;
            padding: 10px;
            border-radius: 4px;
            height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .info-label { font-size: 18px; margin-bottom: 2px; }
        .info-value { font-size: 28px; font-weight: bold; line-height: 1; margin-bottom: 10px; text-transform: uppercase;}
        
        /* ç­¾ååŒºåŸŸå®¹å™¨ */
        .signature-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            width: 100%;
        }
        /* ç­¾ååŒºåŸŸ */
        .signature-area {
            height: 50px;
            flex: 1;
            border: 2px dashed var(--ink-color);
            border-radius: 4px;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            padding: 0 10px;
            box-sizing: border-box;
        }
        .signature-text {
            font-family: 'Friends Z', cursive;
            font-size: 40px;
            color: var(--ink-color);
            text-align: center;
            transform: translateY(-2px);
        }
        .qr-code {
            width: 50px;
            height: 50px;
            border: 1px solid var(--ink-color);
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-right: 3px;
            flex-shrink: 0;
        }
        .qr-code img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .qr-code-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            color: var(--ink-color);
            text-align: center;
            background: repeating-linear-gradient(
                45deg,
                #000,
                #000 2px,
                #fff 2px,
                #fff 4px
            );
            color: #fff;
        }

        /* åº•éƒ¨: æƒé™å’Œæ¡ç  */
        .footer-box {
            background: #fff;
            border: 3px solid var(--ink-color);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            margin-top: auto;
            position: relative;
        }
        .security-level {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
            border-bottom: 2px dashed var(--ink-color);
            padding-bottom: 5px;
            display: block;
        }
        .access-badge {
            background: var(--ink-color);
            color: #fff;
            display: inline-block;
            padding: 5px 20px;
            border-radius: 20px;
            font-size: 24px;
            margin: 5px 0;
            width: 80%;
        }
        .access-badge svg {
            fill: #fff;
            vertical-align: middle;
            margin-bottom: 4px;
        }
        
        /* åŠ¨æ€æ¡å½¢ç æ ·å¼ */
        .barcode {
            height: 50px;
            width: 90%;
            margin: 0 auto;
            background: var(--barcode-gradient, repeating-linear-gradient(
                to right,
                #000 0px, #000 2px,
                transparent 2px, transparent 4px,
                #000 4px, #000 7px,
                transparent 7px, transparent 9px
            ));
            background-size: 100% 100%;
        }
        .id-number {
            margin-top: 5px;
            font-size: 18px;
            letter-spacing: 2px;
        }

        /* --- æ§åˆ¶é¢æ¿æ ·å¼ --- */
        .controls {
            width: 100%;
            max-width: 320px;
            margin-top: 20px;
            background: #333;
            padding: 15px;
            border-radius: 10px;
            box-sizing: border-box;
        }
        .control-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #aaa; font-size: 14px;}
        input[type="text"] {
            width: 100%;
            padding: 8px;
            background: #222;
            border: 1px solid #555;
            color: #fff;
            font-family: inherit;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        input[type="range"] {
            width: 100%;
            height: 6px;
            background: #222;
            border: 1px solid #555;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
            margin-top: 5px;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #fff;
            border: 2px solid #000;
            cursor: pointer;
            border-radius: 3px;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #fff;
            border: 2px solid #000;
            cursor: pointer;
            border-radius: 3px;
        }
        
        .control-group span[id$="-value"] {
            color: #fff;
            font-weight: bold;
            font-size: 14px;
        }
        
        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            background: #222;
            border: 2px solid #555;
            cursor: pointer;
            vertical-align: middle;
        }
        
        input[type="checkbox"]:checked {
            background: #fff;
            border-color: #000;
        }
        
        .upload-btn {
            display: inline-block;
            background: #555;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 5px;
        }
        input[type="file"] { display: none; }

        /* é¢„è®¾é€‰æ‹©å™¨ */
        .preset-list { display: flex; gap: 5px; margin-top: 5px; }
        .preset-item {
            width: 40px;
            height: 40px;
            border: 2px solid #555;
            cursor: pointer;
            object-fit: cover;
        }
        .preset-item:hover, .preset-item.active { border-color: #fff; }

        /* ç”ŸæˆæŒ‰é’® */
        .action-btn {
            width: 100%;
            padding: 15px;
            background: #fff;
            color: #000;
            border: none;
            font-family: inherit;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            border: 4px solid #000;
            box-shadow: 4px 4px 0 #888;
        }
        .action-btn:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 #888;
        }

    </style>
</head>
<body>

    <h2>åƒç´ å·¥å¡ç”Ÿæˆå™¨</h2>

    <div id="card-capture-area">
        <div class="card-content">
            <div class="header-box">
                <img src="https://img.icons8.com/ios-filled/100/000000/united-nations.png" class="header-logo" id="preview-logo">
                <div class="header-text">
                    <h3 id="preview-dept">THE NAVIGATOR PROJECT</h3>
                    <span id="preview-sub-dept">COMPANY</span>
                </div>
            </div>

            <div class="main-section">
                <div class="photo-frame">
                    <img src="https://api.dicebear.com/7.x/pixel-art/svg?seed=fzfxg7" class="photo-img" id="preview-avatar">
                </div>
                <div class="info-block">
                    <div class="info-label">POSITION</div>
                    <div class="info-value" id="preview-position">DATA CLEANER</div>
                    <div class="info-label">NAME</div>
                    <div class="info-value" id="preview-name">Steven</div>
                </div>
            </div>

            <div class="signature-container">
                <div class="signature-area">
                    <div class="signature-text" id="preview-signature">Steven Evens</div>
                </div>
                <div class="qr-code" id="preview-qr">
                    <div class="qr-code-placeholder">QR</div>
                </div>
            </div>

            <div class="footer-box">
                <span class="security-level" id="preview-level">SECURITY CLEARANCE: LEVEL 5</span>
                <div class="access-badge">ACCESS GRANTED <svg t="1765849356055" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4660" width="20" height="20"><path d="M384 384h256v256H384z" p-id="4661"></path><path d="M853.333333 256c0-47.061333-38.272-85.333333-85.333333-85.333333h-85.333333V85.333333h-85.333334v85.333334h-170.666666V85.333333H341.333333v85.333334H256c-47.061333 0-85.333333 38.272-85.333333 85.333333v85.333333H85.333333v85.333334h85.333334v170.666666H85.333333v85.333334h85.333334v85.333333c0 47.061333 38.272 85.333333 85.333333 85.333333h85.333333v85.333334h85.333334v-85.333334h170.666666v85.333334h85.333334v-85.333334h85.333333c47.061333 0 85.333333-38.272 85.333333-85.333333v-85.333333h85.333334v-85.333334h-85.333334v-170.666666h85.333334V341.333333h-85.333334V256zM256 768V256h512l0.085333 512H256z" p-id="4662"></path></svg></div>
                <div class="barcode"></div>
                <div class="id-number" id="preview-id">ID: BIT-JOJO-001</div>
            </div>
        </div>
    </div>

    <div class="controls">
        <div class="control-group">
            <label>å§“å (NAME)</label>
            <input type="text" id="input-name" value="Steven" oninput="updateCard()">
        </div>
        <div class="control-group">
            <label>èŒä½ (POSITION)</label>
            <input type="text" id="input-position" value="DATA CLEANER" oninput="updateCard()">
        </div>
        <div class="control-group">
            <label>ç»„ç»‡ (COMPANY)</label>
            <input type="text" id="input-comp" value="THE NAVIGATOR PROJECT" oninput="updateCard()">
        </div>
        <div class="control-group">
            <label>ID ç¼–å·</label>
            <input type="text" id="input-id" value="ID: BIT-JOJO-001" oninput="updateCard()">
        </div>
        <div class="control-group">
            <label>å®‰å…¨ç­‰çº§</label>
            <input type="text" id="input-level" value="SECURITY CLEARANCE: LEVEL 5" oninput="updateCard()">
        </div>
        <div class="control-group">
            <label>ç­¾å (SIGNATURE)</label>
            <input type="text" id="input-signature" value="Steven Evens" oninput="updateCard()">
        </div>
        <div class="control-group">
            <label>äºŒç»´ç å†…å®¹ (QR CONTENT)</label>
            <input type="text" id="input-qr-content" value="Hello World" oninput="updateQRCode()">
        </div>

        <!-- å­—å·è°ƒæ•´é€‰é¡¹ -->
        <div class="control-group">
            <label>å§“åå­—å·: <span id="font-size-name-value">28</span>px</label>
            <input type="range" id="font-size-name" min="10" max="40" value="28" oninput="updateFontSize()">
        </div>
        <div class="control-group">
            <label>èŒä½å­—å·: <span id="font-size-position-value">18</span>px</label>
            <input type="range" id="font-size-position" min="10" max="40" value="28" oninput="updateFontSize()">
        </div>
        <div class="control-group">
            <label>éƒ¨é—¨å­—å·: <span id="font-size-dept-value">22</span>px</label>
            <input type="range" id="font-size-dept" min="16" max="28" value="22" oninput="updateFontSize()">
        </div>
        <div class="control-group">
            <label>ç­¾åå­—å·: <span id="font-size-signature-value">40</span>px</label>
            <input type="range" id="font-size-signature" min="20" max="50" value="40" oninput="updateFontSize()">
        </div>
        <div class="control-group">
            <label>ç­¾ååŠ ç²—</label>
            <label style="display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" id="signature-bold" onchange="updateSignatureBold()">
                <span style="color: #aaa;">å¯ç”¨ç­¾ååŠ ç²—</span>
            </label>
        </div>

        <div class="control-group">
            <label>å¤´åƒé€‰æ‹©</label>
            <div class="preset-list">
                <img src="https://api.dicebear.com/7.x/pixel-art/svg?seed=fzfxg7" class="preset-item" onclick="setAvatar(this.src)">
                <img src="https://api.dicebear.com/7.x/pixel-art/svg?seed=Alex" class="preset-item" onclick="setAvatar(this.src)">
                <img src="https://api.dicebear.com/7.x/pixel-art/svg?seed=Zoe" class="preset-item" onclick="setAvatar(this.src)">
                <img src="https://api.dicebear.com/7.x/pixel-art/svg?seed=Max" class="preset-item" onclick="setAvatar(this.src)">
                <div class="preset-item" style="display: flex; align-items: center; justify-content: center; background: #555; color: #fff; font-size: 20px; cursor: pointer;" onclick="setRandomAvatar()">ğŸ²</div>
            </div>
            <label for="upload-avatar" class="upload-btn">ğŸ“‚ ä¸Šä¼ è‡ªå®šä¹‰å¤´åƒ</label>
            <input type="file" id="upload-avatar" accept="image/*" onchange="handleImageUpload(this, 'preview-avatar')">
        </div>
        <div class="control-group">
            <label>å¤´åƒéšæœºç§å­ (SEED)</label>
            <input type="text" id="random-seed" placeholder="è¾“å…¥ç§å­æˆ–ç‚¹å‡»éª°å­ç”Ÿæˆ" value="" oninput="applySeed()">
            <div style="display: flex; gap: 5px; margin-top: 5px;">
                <button class="upload-btn" style="flex: 1; margin: 0;" onclick="setRandomAvatar()">ğŸ² éšæœºç”Ÿæˆ</button>
                <button class="upload-btn" style="flex: 1; margin: 0;" onclick="copySeed()">ğŸ“‹ å¤åˆ¶ç§å­</button>
            </div>
        </div>

        <div class="control-group">
            <label>Logo é€‰æ‹©</label>
            <div class="preset-list">
                <img src="https://img.icons8.com/ios-filled/100/000000/king-of-hearts.png" class="preset-item" style="background:#fff" onclick="setLogo(this.src)">
                <img src="https://img.icons8.com/ios-filled/100/000000/moizhusnain-corporation.png" class="preset-item" style="background:#fff" onclick="setLogo(this.src)">
                <img src="https://img.icons8.com/ios-filled/100/000000/united-nations.png" class="preset-item" style="background:#fff" onclick="setLogo(this.src)">
                 <img src="https://img.icons8.com/ios-filled/100/000000/sandwich.png" class="preset-item" style="background:#fff" onclick="setLogo(this.src)">
                  <img src="https://img.icons8.com/ios-filled/100/000000/corinthians.png" class="preset-item" style="background:#fff" onclick="setLogo(this.src)">
            </div>
            <label for="upload-logo" class="upload-btn">ğŸ“‚ ä¸Šä¼ è‡ªå®šä¹‰Logo</label>
            <input type="file" id="upload-logo" accept="image/*" onchange="handleImageUpload(this, 'preview-logo')">
        </div>

        <div class="control-group" style="text-align: center; color: #aaa; font-size: 14px; padding: 10px; background: #222; border-radius: 5px; border: 1px solid #555;">
            ğŸ’¡ è¯·ç›´æ¥ä½¿ç”¨ç³»ç»Ÿæˆªå›¾å·¥å…·ä¿å­˜å·¥å¡å›¾ç‰‡
        </div>
    </div>

    <script>
        // ç”Ÿæˆæ¡å½¢ç å‡½æ•°
        function generateBarcode(idText) {
            // ç®€å•çš„å“ˆå¸Œå‡½æ•°ï¼Œå°†IDæ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—
            let hash = 0;
            for (let i = 0; i < idText.length; i++) {
                const char = idText.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32bit integer
            }
            
            // ä½¿ç”¨å“ˆå¸Œåˆ›å»ºéšæœºçš„æ¡å½¢ç å›¾æ¡ˆ
            const segments = 10; // æ¡å½¢ç æ®µæ•°
            let gradientSteps = [];
            let position = 0;
            
            // ç”Ÿæˆéšæœºçš„é»‘ç™½æ¡çº¹ç»„åˆ
            for (let i = 0; i < segments; i++) {
                // åŸºäºå“ˆå¸Œçš„ä¼ªéšæœºå®½åº¦
                const blackWidth = Math.abs((hash * (i + 1)) % 3) + 1; // 1-3px
                const whiteWidth = Math.abs((hash * (i + 2)) % 4) + 1; // 1-4px
                
                // æ·»åŠ é»‘è‰²æ¡çº¹
                gradientSteps.push(`#000 ${position}px, #000 ${position + blackWidth}px`);
                position += blackWidth;
                
                // æ·»åŠ ç™½è‰²æ¡çº¹
                gradientSteps.push(`transparent ${position}px, transparent ${position + whiteWidth}px`);
                position += whiteWidth;
            }
            
            // ç¡®ä¿è¦†ç›–æ•´ä¸ªæ¡å½¢ç å®½åº¦
            gradientSteps.push(`#000 ${position}px, #000 ${position + 2}px`);
            
            // æ„å»ºæ¸å˜å­—ç¬¦ä¸²
            const gradient = `repeating-linear-gradient(to right, ${gradientSteps.join(', ')})`;
            
            // åº”ç”¨åˆ°CSSå˜é‡
            document.querySelector('.barcode').style.setProperty('--barcode-gradient', gradient);
        }
        
        // 1. æ–‡æœ¬å®æ—¶æ›´æ–°
        function updateCard() {
            document.getElementById('preview-name').innerText = document.getElementById('input-name').value;
            document.getElementById('preview-position').innerText = document.getElementById('input-position').value;
            document.getElementById('preview-dept').innerText = document.getElementById('input-comp').value;
            const idValue = document.getElementById('input-id').value;
            document.getElementById('preview-id').innerText = idValue;
            document.getElementById('preview-level').innerText = document.getElementById('input-level').value;
            document.getElementById('preview-signature').innerText = document.getElementById('input-signature').value;
            
            // æ›´æ–°æ¡å½¢ç 
            generateBarcode(idValue);
        }

        // 2. é¢„è®¾å›¾ç‰‡åˆ‡æ¢
        function setAvatar(src) {
            document.getElementById('preview-avatar').src = src;
        }
        function setLogo(src) {
            document.getElementById('preview-logo').src = src;
        }

        // 3. éšæœºå¤´åƒç”Ÿæˆ
        function setRandomAvatar() {
            const randomSeed = Math.random().toString(36).substring(7);
            const randomAvatarUrl = `https://api.dicebear.com/7.x/pixel-art/svg?seed=${randomSeed}`;
            
            // åº”ç”¨åˆ°é¢„è§ˆå¤´åƒ
            document.getElementById('preview-avatar').src = randomAvatarUrl;
            
            // æ›´æ–°ç§å­è¾“å…¥æ¡†
            document.getElementById('random-seed').value = randomSeed;
        }

        // åº”ç”¨ç§å­ç”Ÿæˆå¤´åƒ
        function applySeed() {
            const seed = document.getElementById('random-seed').value.trim();
            
            if (seed) {
                const avatarUrl = `https://api.dicebear.com/7.x/pixel-art/svg?seed=${seed}`;
                document.getElementById('preview-avatar').src = avatarUrl;
            }
        }

        // å¤åˆ¶ç§å­åˆ°å‰ªè´´æ¿
        function copySeed() {
            const seedInput = document.getElementById('random-seed');
            if (seedInput.value) {
                navigator.clipboard.writeText(seedInput.value).then(() => {
                    // ç®€å•çš„æˆåŠŸæç¤º
                    const originalPlaceholder = seedInput.placeholder;
                    seedInput.placeholder = 'ç§å­å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼';
                    setTimeout(() => {
                        seedInput.placeholder = originalPlaceholder;
                    }, 2000);
                }).catch(() => {
                    // é™çº§æ–¹æ¡ˆ
                    seedInput.select();
                    document.execCommand('copy');
                    const originalPlaceholder = seedInput.placeholder;
                    seedInput.placeholder = 'ç§å­å·²å¤åˆ¶ï¼';
                    setTimeout(() => {
                        seedInput.placeholder = originalPlaceholder;
                    }, 2000);
                });
            }
        }

        // 4. äºŒç»´ç ç”Ÿæˆå’Œæ›´æ–°
        function updateQRCode() {
            const qrContent = document.getElementById('input-qr-content').value;
            const qrContainer = document.getElementById('preview-qr');
            
            // æ¸…ç©ºç°æœ‰å†…å®¹
            qrContainer.innerHTML = '';
            
            if (qrContent.trim() === '') {
                // å¦‚æœå†…å®¹ä¸ºç©ºï¼Œæ˜¾ç¤ºå ä½ç¬¦
                qrContainer.innerHTML = '<div class="qr-code-placeholder">QR</div>';
            } else {
                // ç”Ÿæˆæ–°çš„äºŒç»´ç 
                new QRCode(qrContainer, {
                    text: qrContent,
                    width: 48,
                    height: 48,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.L
                });
            }
        }

        // 5. å›¾ç‰‡ä¸Šä¼ å¤„ç†
        function handleImageUpload(input, targetId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById(targetId).src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // 6. å­—å·è°ƒæ•´å‡½æ•°
        function updateFontSize() {
            const nameSize = document.getElementById('font-size-name').value;
            const positionSize = document.getElementById('font-size-position').value;
            const deptSize = document.getElementById('font-size-dept').value;
            const signatureSize = document.getElementById('font-size-signature').value;
            
            // æ›´æ–°æ˜¾ç¤ºå€¼
            document.getElementById('font-size-name-value').textContent = nameSize;
            document.getElementById('font-size-position-value').textContent = positionSize;
            document.getElementById('font-size-dept-value').textContent = deptSize;
            document.getElementById('font-size-signature-value').textContent = signatureSize;
            
            // è·å–å¯¹åº”çš„å…ƒç´ å¹¶æ›´æ–°å­—å·
            const nameElements = document.querySelectorAll('.info-value');
            const positionElements = nameElements[0]; // ç¬¬ä¸€ä¸ªinfo-valueæ˜¯èŒä½
            const nameElement = nameElements[1]; // ç¬¬äºŒä¸ªinfo-valueæ˜¯å§“å
            
            if (positionElements) positionElements.style.fontSize = positionSize + 'px';
            if (nameElement) nameElement.style.fontSize = nameSize + 'px';
            
            // æ›´æ–°éƒ¨é—¨å­—å·
            document.getElementById('preview-dept').style.fontSize = deptSize + 'px';
            
            // æ›´æ–°ç­¾åå­—å·
            document.getElementById('preview-signature').style.fontSize = signatureSize + 'px';
        }

        // 7. ç­¾ååŠ ç²—åˆ‡æ¢å‡½æ•°
        function updateSignatureBold() {
            const isBold = document.getElementById('signature-bold').checked;
            const signatureElement = document.getElementById('preview-signature');
            
            if (isBold) {
                signatureElement.style.fontWeight = 'bold';
            } else {
                signatureElement.style.fontWeight = 'normal';
            }
        }

        // æ³¨æ„ï¼šç§»é™¤äº†ä¸‹è½½åŠŸèƒ½ï¼Œç”¨æˆ·å¯ç›´æ¥ä½¿ç”¨ç³»ç»Ÿæˆªå›¾å·¥å…·ä¿å­˜å·¥å¡
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ¡å½¢ç ã€äºŒç»´ç ã€å­—å·å’Œå­—ä½“åŠ ç²—
        window.addEventListener('DOMContentLoaded', () => {
            generateBarcode(document.getElementById('input-id').value);
            updateQRCode();
            updateFontSize(); // åˆå§‹åŒ–å­—å·
            updateSignatureBold(); // åˆå§‹åŒ–ç­¾ååŠ ç²—çŠ¶æ€
        });
    </script>
</body>
</html>
